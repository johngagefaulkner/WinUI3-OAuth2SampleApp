<Window
    x:Class="WinUI3OAuth2SampleApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Window.Resources>
        <Style x:Key="CardBorderStyle" TargetType="Border">
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
        </Style>
    </Window.Resources>

    <ScrollViewer>
        <StackPanel Padding="20" Spacing="12">
            <TextBlock 
                Text="WinUI3 OAuth2 Sample Application" 
                Style="{StaticResource TitleTextBlockStyle}"
                Margin="0,0,0,20"/>

            <TextBlock 
                Text="This sample demonstrates OAuth2 authentication using the WindowsAppSDK v1.7.0-Preview1 OAuth2Manager API."
                TextWrapping="Wrap"
                Margin="0,0,0,20"/>

            <!-- Configuration Section -->
            <TextBlock Text="OAuth2 Configuration" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,0,0,8"/>
            <Border Style="{StaticResource CardBorderStyle}">
                <StackPanel Spacing="8">
                    <TextBlock Text="Client ID: my_client_id" FontFamily="Consolas"/>
                    <TextBlock Text="Redirect URI: my-app:/oauth-callback/" FontFamily="Consolas"/>
                    <TextBlock Text="Scope: user:email user:birthday" FontFamily="Consolas"/>
                    <TextBlock Text="Authorization URL: https://my.server.com/oauth/authorize" FontFamily="Consolas"/>
                    <TextBlock Text="Token URL: https://my.server.com/oauth/token" FontFamily="Consolas"/>
                </StackPanel>
            </Border>

            <!-- Action Section -->
            <Button 
                x:Name="SignInButton" 
                Content="Sign In with OAuth2" 
                Click="SignInButton_Click"
                HorizontalAlignment="Stretch"
                Margin="0,12,0,0"/>

            <!-- Status Section -->
            <TextBlock Text="Status" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,20,0,8"/>
            <Border Style="{StaticResource CardBorderStyle}">
                <TextBlock 
                    x:Name="StatusText" 
                    Text="Ready to authenticate"
                    TextWrapping="Wrap"/>
            </Border>

            <!-- Token Display Section -->
            <TextBlock Text="Token Information" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,20,0,8"/>
            <Border Style="{StaticResource CardBorderStyle}">
                <StackPanel Spacing="12">
                    <StackPanel>
                        <TextBlock Text="Access Token:" FontWeight="SemiBold"/>
                        <TextBlock 
                            x:Name="AccessTokenText" 
                            Text="(Not available)"
                            FontFamily="Consolas"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    <StackPanel>
                        <TextBlock Text="Token Type:" FontWeight="SemiBold"/>
                        <TextBlock 
                            x:Name="TokenTypeText" 
                            Text="(Not available)"
                            FontFamily="Consolas"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    <StackPanel>
                        <TextBlock Text="Refresh Token:" FontWeight="SemiBold"/>
                        <TextBlock 
                            x:Name="RefreshTokenText" 
                            Text="(Not available)"
                            FontFamily="Consolas"
                            TextWrapping="Wrap"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Instructions Section -->
            <TextBlock Text="Instructions" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,20,0,8"/>
            <Border Style="{StaticResource CardBorderStyle}">
                <StackPanel Spacing="8">
                    <TextBlock Text="1. Click the 'Sign In with OAuth2' button to start the authentication flow" TextWrapping="Wrap"/>
                    <TextBlock Text="2. A browser window will open with the OAuth2 provider's login page" TextWrapping="Wrap"/>
                    <TextBlock Text="3. After successful authentication, you'll be redirected back to this application" TextWrapping="Wrap"/>
                    <TextBlock Text="4. The access token and other information will be displayed above" TextWrapping="Wrap"/>
                    <TextBlock Text="" />
                    <TextBlock 
                        Text="Note: This is a demo application. Replace the OAuth2 endpoints and credentials with your actual provider's details." 
                        TextWrapping="Wrap"
                        FontStyle="Italic"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Window>
